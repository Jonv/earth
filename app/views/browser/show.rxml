xml.instruct!

xml.directory("path" => @directory.path) do
  @directory.files.each do |file|
    xml.file("name" => file.name) do
      xml.size_in_bytes(file.bytes)
    end
  end
  @directories_and_bytes.each do |directory, bytes|
    xml.directory("name" => directory.name) do
      xml.size_in_bytes(bytes)
    end
  end
end
