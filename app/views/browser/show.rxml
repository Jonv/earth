xml.instruct!

xml.directory("path" => @directory.path) do
  @directory.files.each do |file|
    xml.file("name" => file.name) do
      xml.size_in_bytes(file.size)
    end
  end
  @directories.each do |directory|
    xml.directory("name" => directory.name) do
      xml.size_in_bytes(directory.size)
    end
  end
end
