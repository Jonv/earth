xml.instruct!

xml.directory("path" => @directory.path) do
  @directory.files.each do |file|
    xml.file("name" => file.name) do
      xml.size_in_bytes(file.size)
    end
  end
  @directories_and_sizes.each do |directory, size|
    xml.directory("name" => directory.name) do
      xml.size_in_bytes(size)
    end
  end
end
